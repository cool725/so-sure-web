{% extends 'base_rebrand.html.twig' %}
{% form_theme buy_form 'AppBundle:Form:submit.html.twig' %}
{% form_theme buy_form_banner_two 'AppBundle:Form:submit.html.twig' %}
{% form_theme buy_form_banner_three 'AppBundle:Form:submit.html.twig' %}
{% form_theme buy_form_banner_four 'AppBundle:Form:submit.html.twig' %}

{# Set vars #}
{% set body_class = 'quote' %}
{% set quote_mode = true %}
{% set cta_txt = 'Get Started' %}
{% if cta_exp == 'cta-yes-please' %}
    {% set cta_txt = 'Yes Please!' %}
{% endif %}

{% block title %}{{ phone.model }} Insurance - {{ phone.make }} - Welcome to Social Insurance{% endblock %}
{% block meta %}
    <meta name="description" content="Mobile Insurance that's Simply Better, 24-72 hour replace or repair, Low excess from just £50 - New, secondhand & refurbished phones, Up to 80% money back"/>
    {% if phone.canonicalPath|length > 0 %}
    <link rel="canonical" href="{{ web_base_url }}{{ phone.canonicalPath }}" />
    {% else %}
    <link rel="canonical" href="{{ url('quote_make_model', {'make': phone.makeCanonical, 'model': phone.encodedModelCanonical}) }}" />
    {% endif %}
{% endblock %}

{% block cssPage %}
    <link rel="stylesheet" href="{{ asset('css-js/quotepage.css') }}">
{% endblock %}

{% block body %}

    <section class="qpw">
        <div class="d-lg-flex">

            {# Main Content #}
            <div class="qpw__main__container">
                <div class="qpw__main px-4 px-lg-5">
                    <div class="qpw__h5 h5 text-white mb-4">Here’s your quote details, Insure your:</div>
                    <div class="d-flex justify-content-start align-items-center justify-content-lg-start">
                        <h1 class="qpw__h1 text-columbia-blue-e fit">
                            <span class="sub">
                                {{ phone.make }} {{ phone.model }}
                                <small>({{ phone.memory }}GB)</small>
                            </span>
                        </h1>
                        <div class="qpw__alt__phones dropdown">
                            <a href="#"
                               class="dropdown-toggle"
                               id="dropdownMenuLink"
                               data-toggle="dropdown"
                               aria-haspopup="true"
                               aria-expanded="false">
                                <i class="far fa-chevron-down text-white fa-lg ml-3"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right dropdown-menu-lg-left" aria-labelledby="dropdownMenuLink">
                                {% if phones | length > 1 %}
                                    {% for phone_mem in phones %}
                                        {% if phone_mem.id != phone.id  %}
                                            <a href="{{ path('quote_make_model_memory', {'make': phone_mem.makeCanonical, 'model': phone_mem.encodedModelCanonical, 'memory': phone_mem.memory}) }}" class="dropdown-item h6 mb-0" href="#">
                                                {{ phone_mem.memory }}GB <br>
                                                <small class="sub">{{ phone.make }} {{ phone.model }}</small>
                                            </a>
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
                                <a class="dropdown-item h6 mb-0 get-a-quote disabled" href="#">
                                    Start a new quote <br>
                                    <small class="sub">Not the phone you're looking for?</small>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="qpw__h1 h1 text-white mb-4">
                        <span class="sub">For only</span>
                        &pound;{{ phone_price.monthlyPremiumPrice }} a month
                    </div>
                    {{ form_start(buy_form) }}
                        {{ form_widget(buy_form.buy_tablet, {
                            'label': cta_txt,
                            'attr': {
                                'class': 'btn btn-success btn-green-gradient btn-block-xs mr-sm-2'
                        }}) }}
                        <a href="#"
                           class="btn btn-outline-white watch-video btn-block-xs"
                           data-event="watch-video-quote"
                           data-toggle="modal"
                           data-target="#sosure-video-modal"
                           data-src="https://www.youtube.com/embed/QEskwqsNgrQ">
                            <i class="far fa-play-circle fa-lg opacity-50 mr-1"></i>
                            Watch our Video
                        </a>
                    {{ form_end(buy_form) }}
                </div>

                <div class="qpw__info__container d-none d-lg-block">
                    {% include 'AppBundle::PhoneInsurance/_seeFullDetailsQuote.html.twig' %}
                    <div class="policy__info mx-4 mx-lg-5 py-5">
                        <div class="p-4 d-lg-flex rounded justify-content-lg-between align-items-lg-center">
                            <div class="text-center text-lg-left">
                                <h4 class="text-white">Let's get you covered</h4>
                                <p class="lead text-white mb-0">It'll only take a few minutes</p>
                            </div>
                            {{ form_start(buy_form_banner_two) }}
                                {{ form_widget(buy_form_banner_two.buy, {
                                    'label': cta_txt,
                                    'attr': {
                                        'class': 'btn btn-success btn-green-gradient btn-block-xs mt-4 mt-lg-0'
                                }}) }}
                            {{ form_end(buy_form_banner_two) }}
                        </div>
                    </div>
                </div>

                {# Curve Mobile #}
                <svg class="d-block d-lg-none" preserveAspectRatio="xMinYMin meet" viewBox="0 0 750 47" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g id="Artboard-Copy" fill="#FFFFFF" fill-rule="nonzero">
                            <g id="SVG-Layer" transform="translate(375.000000, 23.500000) scale(1, -1) translate(-375.000000, -23.500000) ">
                                <g id="Page-1">
                                    <g id="Artboard">
                                        <path d="M374,0 C499.333333,0 624.666667,15.6666667 750,47 L0,47 C124,15.6666667 248.666667,8.69674703e-16 374,0 Z" id="Rectangle" transform="translate(375.000000, 23.500000) scale(-1, 1) rotate(-180.000000) translate(-375.000000, -23.500000) "></path>
                                    </g>
                                </g>
                            </g>
                        </g>
                    </g>
                </svg>

            </div>

            {# Curve Desktop #}
            <div class="qpw__curve">
                <svg class="d-none d-lg-block" preserveAspectRatio="xMinYMin meet" viewBox="0 0 57 846" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <defs></defs>
                    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g transform="translate(-12.000000, 0.000000)" fill="#FFFFFF">
                            <path d="M69,0 L69,846 L68,846 C30.6666667,705 12,564 12,423 C12,282 31,141 69,0 Z" id="Rectangle-3"></path>
                        </g>
                    </g>
                </svg>
            </div>

            {# Sub Content #}
            <div class="qpw__sub__container">
                <div class="qpw__sub px-4 pb-4 pt-5 p-lg-5">

                    <h4 class="text-dodger-blue mb-4">Your cover includes:</h4>
                    <ul class="list-unstyled icn-list mb-5">
                        <li class="mb-4">
                            <img src="{{ cdn_url }}/images/rebrand/icns/so-sure_accidental-damage-icn.svg" alt="so-sure - Accidental damage" width="30px" class="mr-2">
                            <strong class="text-zaffre">Cracked screens</strong>
                        </li>
                        <li class="mb-4">
                            <img src="{{ cdn_url }}/images/rebrand/icns/so-sure_theft-loss-icn.svg" alt="so-sure - Theft or loss" width="30px" class="mr-2">
                            <strong class="text-zaffre">Loss &amp; Theft</strong>
                        </li>
                        <li class="mb-4">
                            <img src="{{ cdn_url }}/images/rebrand/icns/so-sure_broken-phone-icn.svg" alt="so-sure - Water damage" width="30px" class="mr-2">
                            <strong class="text-zaffre">Water damage</strong>
                        </li>
                        <li class="mb-4">
                            <img src="{{ cdn_url }}/images/rebrand/icns/so-sure_travel-icn.svg" alt="so-sure - Travel Cover" width="30px" class="mr-2">
                            <strong class="text-zaffre">International travel</strong>
                        </li>
                        <li class="mb-4">
                            <img src="{{ cdn_url }}/images/rebrand/icns/so-sure_out-of-warranty-icn.svg" alt="so-sure - Out of Warranty Breakdown" width="30px" class="mr-2">
                            <strong class="text-zaffre">Out-of-warranty breakdowns</strong>
                        </li>
                        <li class="mb-4">
                            <img src="{{ cdn_url }}/images/rebrand/icns/so-sure_broken-phone-icn.svg" alt="so-sure - Broken headphone jack" width="30px" class="mr-2">
                            <strong class="text-zaffre">Accessories</strong>
                        </li>
                    </ul>
                    <h4 class="text-dodger-blue my-4">We also offer:</h4>
                    <ul class="list-unstyled icn-list">
                        <li class="mb-4">
                            <img src="{{ cdn_url }}/images/rebrand/icns/so-sure_happy-icn-min.svg" alt="so-sure - Accidental damage" width="30px" class="mr-2">
                            <strong class="text-zaffre">
                                24-72 hour replace/repair <br> once claim approved
                                <span class="ml-2 text-dodger-blue">
                                    <a href="#"
                                       data-toggle="modal"
                                       data-target="#policy_24_72_hours"
                                       role="button">
                                        <i class="fal fa-info-circle"></i>
                                    </a>
                                </span>
                            </strong>
                        </li>
                        <li class="mb-4">
                            <img src="{{ cdn_url }}/images/rebrand/icns/so-sure_happy-icn-min.svg" alt="so-sure - Accidental damage" width="30px" class="mr-2">
                            <strong class="text-zaffre">Instant cover after purchase</strong>
                        </li>
                        <li class="mb-4">
                            <img src="{{ cdn_url }}/images/rebrand/icns/so-sure_happy-icn-min.svg" alt="so-sure - Accidental damage" width="30px" class="mr-2">
                            <strong class="text-zaffre">
                                Up to 80% cashback every year
                                <span class="ml-2 text-dodger-blue">
                                    <a href="#"
                                       data-toggle="modal"
                                       data-target="#policy_cashback"
                                       role="button">
                                        <i class="fal fa-info-circle"></i>
                                    </a>
                                </span>
                            </strong>
                        </li>
                    </ul>
                    <div class="mt-5 d-none d-lg-block">
                        {{ form_start(buy_form_banner_three) }}
                            {{ form_widget(buy_form_banner_three.buy, {
                                'label': cta_txt,
                                'attr': {
                                    'class': 'btn btn-success btn-green-gradient btn-block-xs mt-4 mt-lg-0'
                            }}) }}
                        {{ form_end(buy_form_banner_three) }}
                    </div>
                </div>
            </div>

            {# Mobile Info #}
            <div id="qpw-info" class="qpw__info__container__mobile d-block d-lg-none">
                {% include 'AppBundle::PhoneInsurance/_seeFullDetailsQuote.html.twig' %}
            </div>

        </div>
    </section>

    {# Sticky Nav #}
    <div class="qpw__sticky">
        <div class="qpw__sticky__inner px-4 py-3">
            <div class="mb-2">
                {{ (phone.make ~ ' ' ~ phone.model)|truncate(20) }}
                | <strong>&pound;{{ phone_price.monthlyPremiumPrice }}</strong> p/m
            </div>
            {{ form_start(buy_form_banner_four) }}
                {{ form_widget(buy_form_banner_four.buy, {
                    'label': 'Insure your ' ~ phone.make ~ ' phone',
                    'attr': {
                        'class': 'btn btn-success btn-green-gradient'
                }}) }}
            {{ form_end(buy_form_banner_four) }}
        </div>
    </div>

    {# Page Modals #}
    {% include 'AppBundle::PhoneInsurance/_policyInfoModals.html.twig' %}

{% endblock %}

{% block footer %}
    {# TODO: Fix footer #}
{% endblock %}

{% block javascriptsPage %}
    <script src="{{ asset('css-js/quotepage.js') }}"></script>
{% endblock %}
