{% set include_emoji = 1 %}
{% extends 'base.html.twig' %}

{% block title %}so-sure -
    {{ phone }}{% endblock %}
{% block meta %}
    <meta name="description" content="For a small monthly fee your phone is covered for theft, loss, accidental damage and unauthorised usage."/>
    <meta name="keywords" content="mobile insurance, phone insurance, mobile phone insurance, cheap mobile phone insurance, cheap phone insurance, cheap mobile insurance, better phone insurance, better mobile phone insurance"/>
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {% javascripts
    '@AppBundle/Resources/public/js/Default/modalVideo.js'    
    '@AppBundle/Resources/public/js/Default/index.js'
    'components/rangeslider.js/rangeslider.min.js'
    '@AppBundle/Resources/public/js/Default/slider.js'
 %}
    <script src="{{ asset_url }}"></script>{% endjavascripts %}
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {% stylesheets
    '@AppBundle/Resources/public/css/Default/index.css'
    '@AppBundle/Resources/public/css/Default/quotePhone.css'
    '@AppBundle/Resources/public/css/Default/scrollindicator.css'
    '@AppBundle/Resources/public/css/Default/videoOverlay.css'
    '@AppBundle/Resources/public/css/Default/rewardCalculator.css'    
    %}
    <link rel="stylesheet" href="{{ asset_url }}">{% endstylesheets %}
{% endblock %}

{% block body %}

    <section id="quote" class="quote-container">
        {{ form_start(buy_form) }}

        <h1 class="h2">Instant cover for your <span class="">{{ phone }}</span>
                                    <small><a href="{{ path('homepage') }}#get-quote"><strong>Change</strong></a></small></h1>

        <div class="quote">
            
    <!--         <div class="row">
                <div class="col-md-12">
                    <div class="quote-card">
                        <div class="row">
                            <div class="col-xs-12 col-sm-8 col-md-8 device">
                                <span class="h3">
                                    <span class="">{{ phone }}</span>
                                    <small><a href="{{ path('homepage') }}#get-quote"><strong>Change</strong></a></small>
                                </span>               
                            </div>
                        </div>     
                    </div>                     
                </div>
            </div> -->

            <div class="row">
               <div class="col-xs-12 col-sm-7 col-md-7">
                    <div class="quote-card">
<!--                         <h3>
                            <span class="">{{ phone }}</span>
                            <small><a href="{{ path('homepage') }}#get-quote"><strong>Change</strong></a></small>
                        </h3>    -->                     
                        <ul class="list-unstyled">                 
                            <li class="h4">
                                <i class="fa fa-check-circle fa-lg text-green" aria-hidden="true"></i> 
                                Loss <a href="#" data-toggle="modal" data-target="#theft-and-loss"><i class="fa fa-info-circle"></i></a>
                            </li>
                            <li class="h4">
                                <i class="fa fa-check-circle fa-lg text-green" aria-hidden="true"></i> Theft <a href="#" data-toggle="modal" data-target="#theft-and-loss"><i class="fa fa-info-circle"></i></a>
                            </li>
                            <li class="h4">
                                <i class="fa fa-check-circle fa-lg text-green" aria-hidden="true"></i> Accidental damage <a href="#" data-toggle="modal" data-target="#accidental-damage"><i class="fa fa-info-circle"></i></a>
                            </li>
                            <li class="h4">
                                <i class="fa fa-check-circle fa-lg text-green" aria-hidden="true"></i> Breakdown
                            </li> 
                            <li class="h4">
                                <i class="fa fa-check-circle fa-lg text-green" aria-hidden="true"></i> Worldwide coverage <a href="#" data-toggle="modal" data-target="#worldwide-coverage"><i class="fa fa-info-circle"></i></a>
                            </li>             
                            <li class="h4">
                                <i class="fa fa-plus-circle fa-lg text-blue" aria-hidden="true"></i> <strong>Next working day replacement or repair</strong>
                            </li>                                         
                            <li class="h4">
                                <i class="fa fa-plus-circle fa-lg text-blue" aria-hidden="true"></i> <strong>Average claim approval time: <span class="text-green text-nowrap">1hr 4mins</span></strong>
                            </li>
                            <li class="h4">
                                <i class="fa fa-plus-circle fa-lg text-blue" aria-hidden="true"></i> 
                                <span class="visible-xs-inline">
                                    <a id="cashback-link" href="#mobile-price"><strong class="text-dark-grey text-underline">Up to 80% cashback every year</strong></a>
                                </span>
                                <span class="hidden-xs">
                                    <strong class="text-dark-grey">Up to 80% cashback every year</strong>
                                </span>
                            </li>
                        </ul>                   
                    </div>

                    <div id="mobile-price" class="quote-cost text-center">
                        <span class="h1 cost">
                            <strong>£{{ phone_price.monthlyPremiumPrice }}</strong> 
                            <small>per month</small>
                        </span><br>
                        <span>£50 Excess (£70 for Theft &amp; Loss)</span>
                        {{ form_widget(buy_form.buy_tablet, {'label': 'BUY NOW', 'attr': {'class': 'btn btn-success btn-rounded btn-block'}}) }}
                        <br>
                        <small><a href="#" data-toggle="modal" data-target="#policy-modal" class="text-underline">Full Terms &amp; Conditions</a></small>                                                
                    </div>
               </div>    

               <!-- <div class="col-xs-12 visible-xs-block">
                    <div id="mobile-price" class="quote-cost text-center">
                        <span class="h1 cost">
                            <strong>£{{ phone_price.monthlyPremiumPrice }}</strong> 
                            <small>per month</small>
                        </span><br>
                        <span>£50 Excess (£70 for Theft &amp; Loss)</span>
                        {{ form_widget(buy_form.buy_mobile, {'label': 'BUY NOW', 'attr': {'class': 'btn btn-success btn-rounded btn-block'}}) }}
                        <br>
                        <small><a href="#" data-toggle="modal" data-target="#policy-modal" class="text-underline">Full Terms &amp; Conditions</a></small>                    

                    </div>
               </div>   -->

                <div class="col-xs-12 col-sm-5 col-md-5">
                    <div class="quote-card">

                        <h3>Cashback</h3>          
                        <p>Connect with friends &amp; save money, see how it works:</p> 
                        
                        <div class="h4 text-blue"><strong>Friends connected</strong></div>

                        {% set start_friends = phone_price.maxConnections %}

                        {% set start_value = start_friends * connection_value %}

                        {% if start_value > phone_price.maxPot %}
                        
                            {% set start_value = phone_price.maxPot %}
                        
                        {% endif %}

                        {% set start_premium = phone_price.yearlyPremiumPrice - start_value %}     
                        
                        <div class="reward-slider">
                            <input type="range"
                                   id="reward-slider" 
                                   min="0"
                                   max="{{ phone_price.maxConnections }}"
                                   value="{{ start_friends }}"
                                   data-maxpot="{{ phone_price.maxPot }}"
                                   data-connection-value="{{ connection_value }}"
                                   data-premium="{{ phone_price.yearlyPremiumPrice }}">
                        </div>

                        <div class="claim-options">
                            <div class="h4 text-blue"><strong>What if</strong></div>
                            <label for="claim-option">
                                <input type="radio" name="claim-option" value="none" checked=> <small>Nobody claims</small>
                            </label><br>
                            <label for="claim-option">
                                <input type="radio" name="claim-option" value="me"> <small>I make a claim</small>
                            </label><br>
                            <label for="claim-option">
                                <input type="radio" name="claim-option" value="1"> <small>1 friend claims</small>
                            </label><br>
                            <label for="claim-option">
                                <input type="radio" name="claim-option" value="2"> <small>2 friends claim</small>
                            </label>                        
                        </div>

                        <div class="premium-table">

                            <div class="h4 text-blue"><strong>Effective annual premium</strong></div>
                            <table width="100%">
                                <tr>
                                    <td width="45%">
                                        <img src="../images/logo/so-sure-logo-dark.svg" alt="so-sure" width="80px">
                                    </td>
                                    <td width="33%">
                                        <div class="bar bar-us"><div></div></div>
                                    </td>
                                    <td width="22%" align="right">
                                        <strong>
                                            <small id="premium" class="premium-value text-blue">
                                                £{{ start_premium }}
                                            </small>
                                        </strong>
                                    </td>
                                </tr>
                                <tr>
                                    <td><small>Networks</small></td>
                                    <td>
                                        <div class="bar"><div></div></div> 
                                    </td>
                                    <td align="right">
                                        <strong><small class="premium-value">£144.50</small></strong>
                                    </td>
                                </tr>
                                <tr>
                                    <td><small>Protect Your Bubble</small></td>
                                    <td>
                                        <div class="bar"><div></div></div> 
                                    </td>
                                    <td align="right">
                                        <strong><small class="premium-value">£95.88</small></strong>
                                    </td>
                                </tr>
                                <tr>
                                    <td><small>loveitcoverit</small></td>
                                    <td>
                                        <div class="bar"><div></div></div> 
                                    </td>
                                    <td align="right">
                                        <strong><small class="premium-value">£82.39</small></strong>
                                    </td>
                                </tr>
                            </table>
                            <a href="#"><small><em class="text-underline text-dark-grey">Calculation details</em></small></a>
                        </div>

                        <div class="reward-total">
                            <strong id="total-text">Cashback when no one claims</strong>
                            <div class="cashback-value">
                                <strong id="cashback">£{{ start_value }}</strong>
                            </div>
                        </div>

                        <div class="text-center h5">
                            <a href="#"><strong class="text-underline">What happens when someone claims?</strong></a>
                        </div>      

                        <div class="text-center">
                            <a href="#" data-toggle="modal" data-target="#modal-fullscreen"><small class="text-underline">Click for more details</small></a>
                        </div>                         

                    </div>                                           
                </div>

                <!-- <div class="col-sm-12 col-md-12 hidden-xs">
                    <div class="quote-cost text-center">
                        <div class="row">
                            <div class="col-sm-6 col-md-6">
                                {{ form_widget(buy_form.buy_tablet, {'label': 'BUY NOW', 'attr': {'class': 'btn btn-success btn-rounded btn-block'}}) }}
                            </div>                             
                            <div class="col-sm-6 col-md-6">
                                <span class="h1 cost">
                                    <strong>£{{ phone_price.monthlyPremiumPrice }}</strong> 
                                    <small>per month</small>
                                </span><br>
                                <small>£50 Excess (£70 for Theft &amp; Loss)</small>
                            </div>                       
                        </div>
                    </div>
                </div> -->

            </div>

        </div>
        {{ form_end(buy_form) }}
    </section>

    <!-- <section class="stat-banner">
        <div class="container">
            <p class="lead">Every year, there are 8 million incidents of lost, stolen or damaged phones – that’s 1 every 4 seconds.</p>
            <small>Source: YouGov/Assurant, 2015</small>
        </div>
    </section> -->

    <section id="quote-banner" class="banner-sticky banner-sticky-hide">
        <div class="container">
            <div class="row">
                <div class="col-xs-12 col-sm-6 col-md-8">
                    <h3><small>Device</small> <span>{{ phone }}</span></h3>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-2">
                    <h3><span>£{{ phone_price.monthlyPremiumPrice }}</span> <small>/month</small></h3>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-2">

                    {{ form_start(buy_form_banner) }}
                        {{ form_widget(buy_form_banner.buy, {'label': 'BUY NOW', 'attr': {'class': 'btn btn-success btn-rounded'}}) }}
                    {{ form_end(buy_form_banner)}}

                </div>
            </div>
        </div>
    </section>

    {#{% include 'AppBundle::Default/feedbackQuotes.html.twig' %}#}

    {#{ render(controller('AppBundle:Default:sosureCompared')) }#}

    {% include 'AppBundle::Default/modalVideo.html.twig' %}

    <div class="modal fade" id="theft-and-loss" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <i class="fa fa-times fa-lg" aria-hidden="true"></i>
                        <span class="sr-only">Close</span>
                    </button>
                </div>
                <div class="modal-body">  
                    <p>In the event of theft or loss you are also covered for:</p>          
                    <ul>
                        <li>Unauthorised network charges (up to £1,000 including VAT)</li>
                        <li>Accessories (e.g. headphones - up to £100 including VAT)</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="accidental-damage" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <i class="fa fa-times fa-lg" aria-hidden="true"></i>
                        <span class="sr-only">Close</span>
                    </button>
                </div>
                <div class="modal-body">  
                    <p>Accidental Damage:</p>
                    <ul>
                        <li>Including Water Damage.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="worldwide-coverage" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <i class="fa fa-times fa-lg" aria-hidden="true"></i>
                        <span class="sr-only">Close</span>
                    </button>
                </div>
                <div class="modal-body">  
                    <p>Worldwide Coverage:</p>
                    <ul>
                        <li>Valid for 90 days while you are traveling for leisure or business.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div> 

    <div class="modal modal-policy fade" id="policy-modal" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <i class="fa fa-times fa-lg" aria-hidden="true"></i>
                        <span class="sr-only">Close</span>
                    </button>
                </div>
                <div class="modal-body">
                    {{ render(controller('AppBundle:ApiView:policyLatestTerms', {'policy_key': policy_key, 'maxPotValue':  phone.getCurrentPhonePrice.maxPot })) }}
                </div>
            </div>
        </div>
    </div>       

{% endblock %}