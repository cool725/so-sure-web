{% set include_emoji = 1 %}
{% extends 'base.html.twig' %}

{% set white_logo = true %}

{% block title %}so-sure -
    {{ phone }}{% endblock %}
{% block meta %}
    <meta name="description" content="For a small monthly fee your phone is covered for theft, loss, accidental damage and unauthorised usage."/>
    <meta name="keywords" content="mobile insurance, phone insurance, mobile phone insurance, cheap mobile phone insurance, cheap phone insurance, cheap mobile insurance, better phone insurance, better mobile phone insurance"/>
    <link rel="canonical" href="{{ url('quote_make_model', {'make': phone.make, 'model': phone.encodedModel}) }}" />

    <meta property="og:video" content="https://cdn.so-sure.com/video/explainer-subtitle-640.mp4" />
    <meta property="og:video:secure_url" content="https://cdn.so-sure.com/video/explainer-subtitle-640.mp4" />
    <meta property="og:video:type" content="video/mp4" />
    <meta property="og:video:width" content="640" />
    <meta property="og:video:height" content="360" />
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {% javascripts
    'components/vimeo-player-js/player.min.js'        
    '@AppBundle/Resources/public/js/Default/modalVideo.js'    
    '@AppBundle/Resources/public/js/Default/index.js'
    'components/rangeslider.js/rangeslider.min.js'
    '@AppBundle/Resources/public/js/Default/slider.js'
    '@AppBundle/Resources/public/js/Default/selectPhoneMake.js'    
 %}
    <script src="{{ asset_url }}"></script>{% endjavascripts %}
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {% stylesheets
    '@AppBundle/Resources/public/css/Default/index.css'
    '@AppBundle/Resources/public/css/Default/quotePhone.css'
    '@AppBundle/Resources/public/css/Default/selectPhoneMake.css'    
    '@AppBundle/Resources/public/css/Default/scrollindicator.css'
    '@AppBundle/Resources/public/css/Default/modal.css'    
    '@AppBundle/Resources/public/css/Default/videoOverlay.css'
    '@AppBundle/Resources/public/css/Default/rewardCalculator.css'    
    %}
    <link rel="stylesheet" href="{{ asset_url }}">{% endstylesheets %}
{% endblock %}

{% block body %}

    <section id="quote" class="quote-container">
        {{ form_start(buy_form) }}

        {% if coming_soon %}
        <h1 class="h2">Better cover for your <span class="text-white">{{ phone }} is coming soon!</span>
        </h1>
        {% else %}
        <h1 class="h2">
            Insurance for your              
            <div class="dropdown memory-dropdown-list">         
                <a href="#" class="dropdown-toggle text-white" type="button" id="memoryDropdownList"data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    {{ phone }} <i class="fa fa-caret-down" aria-hidden="true"></i>
                </a>

                <ul class="dropdown-menu memory-dropdown" aria-labelledby="memoryDropdownList">
                    {% if phones | length > 1 %}    
                        {% for phone_mem in phones if phone_mem.id != phone.id %}
                            <li>
                                <a href="{{ path('quote_make_model_memory', {'make': phone_mem.make, 'model': phone_mem.encodedModel, 'memory': phone_mem.memory}) }}" class=""> {{ phone.model }} - {{ phone_mem.memory }}GB</a>
                            </li>
                        {% endfor %}                            
                    {% endif %}                          
                    <li><a href="#" data-toggle="modal" data-target="#quote-model"> I have a different phone</a></li>
                </ul>                          
            </div>
        </h1>
        {% endif %}

        <div class="quote">

            <div class="row">
                <div class="col-md-12">
                    <div id="cover-price" class="quote-cost text-center">
                        {# <div class="text-center h4">If your phone is stolen/lost, replacing it costs <strong>Â£{{ phone.initialPrice }}</strong> ðŸ˜§ Get peace of mind for:</div> #}
                        <div class="row">
                            {% if coming_soon %}
                                <div class="col-sm-6">
                                    <div class="h1 price">
                                        Pricing coming soon!
                                        <strong>Â£4.99 - Â£9.99</strong>
                                        <small>per month (typical policy pricing)</small><br>
                                    </div>
                                    <span>Â£50 Excess (Â£70 for Theft &amp; Loss)</span>
                                </div>
                                <div class="col-sm-6">
                                    {{ form_widget(buy_form.buy_tablet, {'label': 'COMING SOON!', 'attr': {'class': 'btn btn-success btn-rounded btn-block disabled'}}) }}
                                </div>
                            {% else %}
                                <div class="col-sm-6">                                
                                    <div class="h1 price">
                                        <strong>Â£{{ phone_price.monthlyPremiumPrice }}</strong>
                                        <small>per month</small><br>
                                    </div>
                                    <span>Â£50 Excess (Â£70 for Theft &amp; Loss)</span>
                                </div>
                                <div class="col-sm-6">
                                    {{ form_widget(buy_form.buy_tablet, {'label': 'BUY NOW', 'attr': {'class': 'btn btn-success btn-rounded btn-block'}}) }}
                                    <ul class="list-inline">
                                        <li>
                                            <small><a href="#" data-toggle="modal" data-target="#policy-modal" id="policy-modal-trigger">Full Terms &amp; Conditions</a></small> 
                                        </li>
                                        <li><span class="text-grey">|</span></li>
                                        <li>
                                            <small><a href="#" data-event-url="mailto:?subject=Instant%20cover%20for%20your%20{{ phone|url_encode }}&body=Hi%2C%0A%0ACheck%20out%20this%20great%20phone%20insurance%20quote%20from%20so-sure%20that%20includes%20cover%20for%20theft%2C%20loss%2C%20accidental%20damage%20and%20breakdown%20as%20standard.%0A%0A{{ app.request.uri|url_encode }}%0A%0ADemand%20better%20insurance!" class="sosure-track" data-event="share-quote"><i class="fa fa-envelope" aria-hidden="true"></i> Email this quote</a></small>
                                        </li>
                                    </ul>                                    
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
               <div class="col-xs-12 col-sm-7 col-md-7">
                    <div class="quote-card">
                        <h3>so-sure proudly offers</h3>
                        <ul class="list-unstyled">                              
                            <li class="h4"><i class="fa fa-plus-circle fa-lg text-blue" aria-hidden="true"></i>Next working day replacement or repair</li>
                            <li class="h4"><i class="fa fa-plus-circle fa-lg text-blue" aria-hidden="true"></i>24/7 live support</li>       
                            <li class="h4"><i class="fa fa-plus-circle fa-lg text-blue" aria-hidden="true"></i>Insure used phones (&lt; 4 years old)</li>
                            <li class="h4"><i class="fa fa-plus-circle fa-lg text-blue" aria-hidden="true"></i>Cover starts when you buy </li>             
                            <li class="h4">
                                <i class="fa fa-plus-circle fa-lg text-blue" aria-hidden="true"></i> 
                                <span class="visible-xs-inline">
                                    <a id="cashback-link" href="#cashback-card"><span class="text-dark-grey text-underline">Up to 80% cashback every year</span></a>
                                </span>
                                <span class="hidden-xs">
                                    <span class="text-dark-grey">Up to 80% cashback every year</span>
                                </span>                                
                            </li>
                            <br>
                        </ul>
                        <h3>Our cover always includes</h3>
                        <ul class="list-unstyled">    
                            <li class="h4">
                                <i class="fa fa-check-circle fa-lg text-green" aria-hidden="true"></i> 
                                Loss <a href="#" data-toggle="modal" data-target="#theft-and-loss"><i class="fa fa-info-circle"></i></a>
                            </li>   
                            <li class="h4">
                                <i class="fa fa-check-circle fa-lg text-green" aria-hidden="true"></i> Theft <a href="#" data-toggle="modal" data-target="#theft-and-loss"><i class="fa fa-info-circle"></i></a>
                            </li>    
                            <li class="h4">
                                <i class="fa fa-check-circle fa-lg text-green" aria-hidden="true"></i> Accidental damage (e.g. cracked screen) <a href="#" data-toggle="modal" data-target="#accidental-damage"><i class="fa fa-info-circle"></i></a>
                            </li>
                            <li class="h4">
                                <i class="fa fa-check-circle fa-lg text-green" aria-hidden="true"></i> Out of warranty breakdown
                            </li>      
                            <li class="h4">
                                <i class="fa fa-check-circle fa-lg text-green" aria-hidden="true"></i> Worldwide coverage <a href="#" data-toggle="modal" data-target="#worldwide-coverage"><i class="fa fa-info-circle"></i></a>
                            </li>                                                                                                     
                        </ul>          
                    </div>

         {#            <div id="cover-price" class="quote-cost text-center">
                        {% if coming_soon %}
                            <span class="h1">
                                Pricing coming soon!
                                <strong>Â£4.99 - Â£9.99</strong>
                                <small>per month (typical policy pricing)</small><br>
                            </span>
                            <span>Â£50 Excess (Â£70 for Theft &amp; Loss)</span>
                            {{ form_widget(buy_form.buy_tablet, {'label': 'Coming Soon!', 'attr': {'class': 'btn btn-success btn-rounded btn-block disabled'}}) }}
                        {% else %}
                            <p>If your phone is stolen/lost, replacing it costs <strong>Â£{{ phone.initialPrice }}</strong> ðŸ˜§ <br>Get peace of mind for:</p>
                            <span class="h1">
                                <strong>Â£{{ phone_price.monthlyPremiumPrice }}</strong>
                                <small>per month</small><br>
                            </span>
                            <span>Â£50 Excess (Â£70 for Theft &amp; Loss)</span>
                            {{ form_widget(buy_form.buy_tablet, {'label': 'Get Started', 'attr': {'class': 'btn btn-success btn-rounded btn-block'}}) }}
                        {% endif %}
                        <ul class="list-inline">
                            <li>
                                <small><a href="#" data-toggle="modal" data-target="#policy-modal" id="policy-modal-trigger">Full Terms &amp; Conditions</a></small> 
                            </li>
                            <li><span class="text-grey">|</span></li>
                            <li>
                                <small><a href="#" data-event-url="mailto:?subject=Instant%20cover%20for%20your%20{{ phone|url_encode }}&body=Hi%2C%0A%0ACheck%20out%20this%20great%20phone%20insurance%20quote%20from%20so-sure%20that%20includes%20cover%20for%20theft%2C%20loss%2C%20accidental%20damage%20and%20breakdown%20as%20standard.%0A%0A{{ app.request.uri|url_encode }}%0A%0ADemand%20better%20insurance!" class="sosure-track" data-event="share-quote"><i class="fa fa-envelope" aria-hidden="true"></i> Email this quote</a></small>
                            </li>
                        </ul>
                    </div> #}
                </div>    

                <div class="col-xs-12 col-sm-5 col-md-5">
                    <div id="cashback-card" class="quote-card">

                        <div id="loading-overlay-init" class="loading-overlay" style="display:block;"></div>

                        {% if coming_soon %}
                            <h3>Sample Cashback</h3>
                            <p><i>(based on annual premium of Â£100)</i></p>
                        {% else %}
                            <h3>Cashback</h3>          
                        {% endif %}
                        <p>Connect with friends &amp; save money, see how it works:</p>
                        
                        <div class="h4 text-grey-blue"><strong>Friends connected</strong></div>

                        {% set start_friends = max_connections %}

                        {% set start_value = start_friends * connection_value %}

                        {% if start_value > max_pot %}
                        
                            {% set start_value = max_pot %}
                        
                        {% endif %}

                        {% set start_premium = annual_premium - start_value %}     
                        
                        <div class="reward-slider">                            
                            <input type="range"
                                   id="reward-slider" 
                                   min="0"
                                   max="{{ max_connections }}"
                                   value="{{ start_friends }}"
                                   data-maxpot="{{ max_pot }}"
                                   data-connection-value="{{ connection_value }}"
                                   data-premium="{{ annual_premium }}"
                                   data-max-comparison="{{ comparision_max }}">
                        </div>


                        <div class="reward-total">
                            <div class="cashback-value">
                                <strong id="cashback">Â£{{ start_value }}</strong>
                                <strong id="cashback-with-claim"></strong>
                            </div>
                            <small id="cashback-text">Cashback if no one claims</small>
                        </div>      

                        <div class="premium-and-claims">                  
                            <div id="loading-overlay-switch" class="loading-overlay"></div>

                            <div class="premium-table">
                                <div class="h4 text-grey-blue"><strong>Effective annual premium</strong></div>
                                <table width="100%">
                                    <tr>
                                        <td width="45%">
                                            <img src="../images/logo/so-sure-logo-dark.svg" alt="so-sure" width="80px">
                                        </td>
                                        <td width="33%">
                                            <div class="bar bar-us"><div></div></div>
                                        </td>
                                        <td width="22%" align="right">
                                            <strong>
                                                <small id="premium" class="premium-value text-blue">
                                                    Â£{{ start_premium|number_format(2, '.', ',') }}
                                                </small>
                                            </strong>
                                        </td>
                                    </tr>
                                    {% for name, value in comparision %}
                                    <tr>
                                        <td><small>{{ name }}</small></td>
                                        <td>
                                            <div class="bar"><div></div></div> 
                                        </td>
                                        <td align="right">
                                            <strong><small class="premium-value">Â£{{ value|number_format(2, '.', ',') }}</small></strong>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </table>
                                
                                {% if comparision | length > 0 %}
                                    <div class="text-right">
                                         <a href="#" data-toggle="modal" data-target="#calculation-details"><small><em class="text-underline text-dark-grey">Calculation details</em></small></a>
                                    </div>
                                {% endif %}

                                <div class="text-center h5">
                                    <a id="what-if" href="#" data-toggle-text="Return to annual premium"><strong class="text-underline">What happens when someone claims?</strong></a>
                                </div>                             
                            </div>

                            <div class="claim-options">
                                <div class="h4 text-blue"><strong>What if</strong></div>


                                <div class="list-group claim-options-list"
                                     data-cashback-target="#cashback-text">
                                    <button 
                                        type="button" 
                                        class="list-group-item active"
                                        data-claim-option="0"
                                        data-cashback-text="Cashback if no one claims">
                                        No claim
                                    </button>
                                    <button 
                                        type="button" 
                                        class="list-group-item"
                                        data-claim-option="1"
                                        data-cashback-text="Cashback if I make a claim">
                                        I make a claim
                                    </button>
                                    <button 
                                        type="button" 
                                        class="list-group-item"
                                        data-claim-option="2"
                                        data-cashback-text="Cashback if 1 claim in my network">
                                        1 claim in my network
                                    </button>
                                    <button 
                                        type="button" 
                                        class="list-group-item"
                                        data-claim-option="3"
                                        data-cashback-text="Cashback if 2+ claims in my network">
                                        2+ claims in my network
                                    </button>
                                </div>      

                                <div class="text-center h5">
                                    <a id="what-if-return" href="#"><strong class="text-underline">Return to premium comparison</strong></a>
                                </div> 
                            </div>       
                        </div>
                        <div class="text-center">
                            <a class="btn btn-subtle btn-rounded btn-hollow btn-block btn-hollow-subtle btn-play-right" href="#" data-toggle="modal" data-target="#modal-fullscreen"><small class="text-underline">Video of how it works</i></small></a>
                        </div>                                         
                    </div>
                </div>

            </div>
        </div>
    
    {{ form_end(buy_form) }}
    </section>

    {% include 'AppBundle::Default/press.html.twig' %}

    <section id="quote-banner" class="banner-sticky banner-sticky-hide">
        <div class="container">
            <div class="row">
                <div class="col-xs-12 col-sm-6 col-md-8">
                    <h3><small>Device</small> <span>{{ phone }}</span></h3>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-2">
                    <h3><span>Â£{{ phone_price.monthlyPremiumPrice }}</span> <small>/month</small></h3>
                </div>
                <div class="col-xs-12 col-sm-3 col-md-2">

                    {{ form_start(buy_form_banner) }}
                        {{ form_widget(buy_form_banner.buy, {'label': 'Get Started', 'attr': {'class': 'btn btn-success btn-rounded'}}) }}
                    {{ form_end(buy_form_banner)}}

                </div>
            </div>
        </div>
    </section>
    
    {% include 'AppBundle::Default/fasterClaims.html.twig' %}

    {% include 'AppBundle::Default/saveMoney.html.twig' %}
    
    {% include 'AppBundle::Default/feedbackQuotes.html.twig' %}

    {% include 'AppBundle::Default/whySoSure.html.twig' %}

    <section class="phone-details">
        <div class="container">
            <h3>About the {{ phone.make }} {{ phone.model }}</h3>
            <ul>
                <li>Camera: {{ phone.camera }} MP</li>
                <li>Size: {{ phone.getScreenPhysicalInch }}"</li>
                <li>Screen Resolution: {{ phone.getScreenResolution }}</li>
                <li>RAM: {{ phone.getRamDisplay }}</li>
            </ul>
            {% if phone.funFacts|length > 0 %}
                <p>{{ phone.funFacts|raw }}</p>
            {% endif %}
            {% if phone.description|length > 0 %}
                <p>{{ phone.description|raw }}</p>
            {% endif %}
        </div>
    </section>

    {% include 'AppBundle::Default/partnership.html.twig' %}

    {# Page Modals #}

    {% include 'AppBundle::Default/modalVideo.html.twig' %}    

    <div class="modal modal-fullscreen fade" 
         id="policy-modal" 
         tabindex="-1" 
         role="dialog" 
         aria-labelledby="So-Sure Policy Terms" 
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <i class="fa fa-times fa-lg" aria-hidden="true"></i>
                        <span class="sr-only">Close</span>
                    </button>
                    <h3>So-Sure Policy Terms</h3>
                </div>
                <div class="modal-body modal-policy">
                    {{ render(controller('AppBundle:ApiView:policyLatestTerms', {'policy_key': policy_key, 'maxPotValue':  max_pot })) }}
                </div>
            </div>
        </div>
    </div>  

    <div class="modal fade" 
         id="theft-and-loss" 
         tabindex="-1" 
         role="dialog" 
         aria-labelledby="Theft & Loss" 
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <i class="fa fa-times fa-lg" aria-hidden="true"></i>
                        <span class="sr-only">Close</span>
                    </button>
                    <h3>Theft &amp; Loss</h3>
                </div>
                <div class="modal-body">
                    <p><strong>In the event of theft or loss you are also covered for:</strong></p>
                    <p>Unauthorised network charges (up to Â£1,000 including VAT)</p>
                    <p>Accessories (e.g. headphones - up to Â£100 including VAT)</p>                  
                </div>
            </div>
        </div>
    </div>    

    <div class="modal fade" 
         id="accidental-damage" 
         tabindex="-1" 
         role="dialog" 
         aria-labelledby="Accidental Damage" 
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <i class="fa fa-times fa-lg" aria-hidden="true"></i>
                        <span class="sr-only">Close</span>
                    </button>
                    <h3>Accidental Damage</h3>
                </div>
                <div class="modal-body">
                    <p>Including Water Damage.</p>
                </div>
            </div>
        </div>
    </div>  

    <div class="modal fade" 
         id="worldwide-coverage" 
         tabindex="-1" 
         role="dialog" 
         aria-labelledby="Worldwide Coverage" 
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <i class="fa fa-times fa-lg" aria-hidden="true"></i>
                        <span class="sr-only">Close</span>
                    </button>
                    <h3>Worldwide Coverage</h3>
                </div>
                <div class="modal-body">
                    <p>Valid for 90 days while you are traveling for leisure or business.</p>           
                </div>
            </div>
        </div>
    </div>  

    <div class="modal fade" 
         id="calculation-details" 
         tabindex="-1" 
         role="dialog" 
         aria-labelledby="Calculation Details" 
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <i class="fa fa-times fa-lg" aria-hidden="true"></i>
                        <span class="sr-only">Close</span>
                    </button>
                    <h3>Calculation Details</h3>
                </div>
                <div class="modal-body">
                    <p><strong>How we calculate this:</strong></p>
                    <p>Prices based on data available from competitor websites, last updated on 1 February 2017.â€¨â€¨</p>
                    <p>Networks taken as an average of O2, Vodafone, and Three.</p>
                    <p>High Street is Car Phone Warehouse.</p>          
                </div>
            </div>
        </div>
    </div>   


    <div class="modal modal-middle fade" 
         id="quote-model" 
         tabindex="-1" 
         role="dialog" 
         aria-labelledby="quoteModelLabel" 
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <i class="fa fa-times fa-lg" aria-hidden="true"></i>
                        <span class="sr-only">Close</span>
                    </button>
                    <h3 class="text-center">Select Make &amp; Model</h3>
                </div>
                <div class="modal-body">
                    {{ render(controller('AppBundle:Default:selectPhoneMake')) }}
                </div>
            </div>
        </div>
    </div>      
    {# End Page Modals #}

{% endblock %}
