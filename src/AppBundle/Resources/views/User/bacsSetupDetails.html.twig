<h1 class="h2 mb-4">Setup Direct Debit</h1>

{{ form_start(bacs_form, {'attr': {
    'data-toggle': 'validator',
    'class': 'validate-form form-400 mx-0 mb-5',
    'data-client-validation': form_client_validation,
    'autocomplete': 'off'
}}) }}
    <p>Please enter your bank details you wish to use for your Direct Debit each month.</p>
    <div class="form-group {% if form_errors(bacs_form.accountName) %}has-error{% endif %}">
        {{ form_label(bacs_form.accountName, 'Name on account') }}
        {{ form_widget(bacs_form.accountName, {'attr': {'class': 'form-control', 'data-hj-suppress': ''}}) }}
        {% if policy %}
            {{ form_widget(bacs_form.validateName, {'value' : policy.user.name}) }}
        {% endif %}
        {% if form_errors(bacs_form.accountName) %}
            <div class="with-errors">{{ form_errors(bacs_form.accountName) }}</div>
        {% else %}
            <small class="form-text">The bank account must be in the policy holder's name "{% if policy %}{{ policy.user.name }}{% else %}{{ app.user.name }}{% endif %}"</small>
        {% endif %}
    </div>
    <div class="form-row">
        <div class="col">
            <div class="form-group {% if form_errors(bacs_form.sortCode) %}has-error{% endif %}">
                {{ form_label(bacs_form.sortCode, 'Sort code') }}
                {{ form_widget(bacs_form.sortCode, {'attr': {'placeholder': 'e.g. 02-02-02', 'class': 'form-control sort-code', 'maxlength': 6, 'data-hj-suppress': ''}}) }}
                <div class="with-errors">{{ form_errors(bacs_form.sortCode) }}</div>
            </div>
        </div>
        <div class="col">
            <div class="form-group {% if form_errors(bacs_form.accountNumber) %}has-error{% endif %}">
                {{ form_label(bacs_form.sortCode, 'Account number') }}
                {{ form_widget(bacs_form.accountNumber, {'attr': {'placeholder': 'e.g. 83748596', 'class': 'form-control', 'maxlength': 8, 'data-hj-suppress': ''}}) }}
                <div class="with-errors">{{ form_errors(bacs_form.accountNumber) }}</div>
            </div>
        </div>
    </div>
    <div class="form-group">
        {{ form_widget(bacs_form.soleSignature, {
             'label': 'I am the sole signature on the account',
            'attr': {'class':'custom-control-input'}}
        ) }}
        <div class="with-errors">{{ form_errors(bacs_form.soleSignature) }}</div>
    </div>
    <div class="form-group my-5">
        <div class="form-row">
            <div class="col-3">
                <a href="#"
                   class="btn btn-outline-grey btn-circle d-flex justify-content-center align-items-center show-tab"
                   data-tab-to="{% if user.paymentMethod and user.paymentMethod.type == "bacs" %}#payment_bacs_tab{% else %}#payment_card_tab{% endif %}">
                    <span class="sr-only">back</span>
                    <i class="far fa-arrow-left"></i>
                </a>
            </div>
            <div class="col-9 text-right">
                {{ form_widget(bacs_form.save, {
                    'label': 'Continue',
                    'fa': 'far fa-long-arrow-right fa-lg ml-2',
                    'right': true,
                    'attr': {
                        'class': 'btn btn-success btn-green-gradient btn-block-xs'
                }}) }}
            </div>
        </div>
    </div>
    <div class="form-group d-flex align-items-center">
        <img src="{{ cdn_url }}/images/rebrand/misc/so-sure_direct-debit-logo.svg" alt="Direct Debit" width="100px">
        <small class="form-text mb-2 ml-2">
            Payments protected by the <a href="#" data-toggle="modal" data-target="#direct_debit_guarantee"><u>Direct Debit Guarantee</u></a>.
            so-sure Ltd, Martin House, 5 Martin Lane, London EC4R 0DP<br>
            +44 330 223 4948, <a href="mailto:hello@wearesosure.com">hello@wearesosure.com</a>
        </small>
    </div>
{{ form_end(bacs_form) }}
