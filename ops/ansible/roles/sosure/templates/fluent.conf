<source>
  type tail
  path /var/log/nginx/access.log
  pos_file /var/log/fluent/access.log.pos # This is where you record file position
  tag nginx.access #fluentd tag!
  format nginx # Do you have a custom format? You can write your own regex.
</source>

<match **>
  type s3
  path nginx # <s3 path> #(optional; default="")
  aws_key_id {{ logs_access_key }}
  aws_sec_key {{ logs_secret_key }}
  s3_bucket logs.so-sure.com # <s3 bucket name> #(required)
  s3_region eu-west-1
  auto_create_bucket false # <true/false> #(optional; default=true)
  check_apikey_on_start true # <true/false> #(optional; default=true)
  buffer_path /var/log/fluent/s3
</match>
