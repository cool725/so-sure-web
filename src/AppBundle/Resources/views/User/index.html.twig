{% extends 'base.html.twig' %}

{% block javascripts %}
    {{ parent() }}
    {% javascripts
    'bundles/app/js/User/index.js' %}
    <script src="{{ asset_url }}"></script>{% endjavascripts %}
{% endblock %}

{% block body %}
    <div class="container reward-pot">
        <h1 class="text-center">Welcome {{ policy.user.firstname }}!</h1>
        <p class="lead text-center" style="padding-bottom: 20px;">
            This account page is still a work in progress, so it's a bit limited at the moment. However, if you have any ideas of what might be useful to you, we'd love to
            <a href="mailto:hello@wearesosure.com">hear them</a>.
        </p>
        <div class="col-md-6">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h4>Reward Pot</h4>
                </div>
                <div class="panel-body">
                        <div class="row">
                            <p class="text-center" style="padding: 20px;">
                                Here is your Reward Pot, you can also see who you're connected with in our the app.
                            </p>
                            <div class="align-center">
                            <div class="doughnut-outer center-block text-center" data-max-connections="{{ policy.maxConnections }}"
                                 data-connections="{{ policy.connections|length }}" data-invites="{{ policy.sentInvitations|length }}">
                                <canvas id="myChart"></canvas>
                                <div class="doughnut-inner">
                                    <h3>£{{ policy.potValue }}</h3>
                                    <h4>Reward Pot Value</h4>
                                    <span>of a maxium of £{{ policy.maxPot }}</span>
                                </div>
                            </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        <div class="col-md-6">
            <div class="panel panel-default">
                <div class="panel-heading">
                  <h4>Invite Friends</h4>
                </div>
                <div class="panel-body">
                  <div class="row">
                    <p class="text-center" style="padding: 20px;">Just enter their email below and we'll do the rest. Alternatively, open up our app and you can invite them however you'd like.</p>
                    {{ form_start(email_form, {'attr': {'class': 'form-inline'}}) }}
                    <div class="form-group">
                        {{ form_errors(email_form.email) }}
                        {{ form_widget(email_form.email, {'attr': {'placeholder': 'Enter their email'}}) }}
                    </div>
                    {{ form_widget(email_form.submit, {'label': 'Invite', 'attr': {'class': 'btn btn-primary'}}) }}&nbsp;
                    {{ form_end(email_form) }}
                </div>
            </div>
        </div>
    </div>
  </div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.3.0/Chart.min.js" type="text/javascript"></script>

{% endblock %}

{% block stylesheets %}
{{ parent() }}
{% stylesheets
'@AppBundle/Resources/public/css/User/index.css'
'@AppBundle/Resources/public/css/User/trust.css'
 %}
<link rel="stylesheet" href="{{ asset_url }}">
{% endstylesheets %}
{% endblock %}
