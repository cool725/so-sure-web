{% extends 'base_rebrand.html.twig' %}
{% form_theme purchase_form 'AppBundle:Form:fields.html.twig' %}

{# Set vars #}
{% set body_class = 'quote' %}
{% set quote_mode = 1 %}

{% block title %}
    {% if phone %}
        {{ phone.model }} Insurance - {{ phone.make }} - Welcome to Social Insurance
    {% else %}
        so-sure - Welcome to Social Insurance
    {% endif %}
{% endblock %}

{% block meta %}{% endblock %}

{% block cssPage %}
    <link rel="stylesheet" href="{{ asset('css-js/purchase.css') }}">
{% endblock %}

{% block body %}

    <section class="purchase">
        <div class="d-lg-flex">

            {% if phone %}
                <div class="purchase__details__container">
                    <div class="purchase__details px-4 pb-4 px-lg-5 pb-lg-0">
                        <div class="purchase__h5 text-white mb-4 h5 d-none d-lg-block">Here’s your quote details, Insure your:</div>
                        <div class="d-flex justify-content-center align-items-center justify-content-lg-start">
                            <h1 class="purchase__h1 text-blue1b mb-2">
                                <span class="sub">
                                    {{ phone.make }} {{ phone.model }}
                                    <small>({{ phone.memory }}GB)</small>
                                </span>
                            </h1>
                            <div class="purchase__alt__phones dropdown dropleft">
                                <a href="#"
                                   class="dropdown-toggle"
                                   id="dropdownMenuLink"
                                   data-toggle="dropdown"
                                   aria-haspopup="true"
                                   aria-expanded="false">
                                    <i class="fas fa-chevron-down text-white fa-lg ml-3"></i>
                                </a>
                                <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                    {% if phones | length > 1 %}
                                        {% for phone_mem in phones %}
                                            {% if phone_mem.id != phone.id  %}
                                                <a href="{{ path('select_phone_make_search_type_id', {'type': 'purchase-change', 'id': phone_mem.id}) }}" class="dropdown-item h6" href="#">
                                                    {{ phone_mem.memory }}GB
                                                    <small>{{ phone.make }} {{ phone.model }}</small>
                                                </a>
                                            {% endif %}
                                        {% endfor %}
                                    {% endif %}
                                    <a class="dropdown-item h6 get-a-quote" href="#">
                                        Start a new quote
                                        <small>Not the phone you're looking for?</small>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="purchase__h1 text-white text-center text-lg-left h1">
                            <span class="sub">For only</span>
                            {% if not app.user or app.user.allowedMonthlyPayments %}
                                &pound;{{ phone.currentPhonePrice.monthlyPremiumPrice|number_format(2, '.', ',') }} a month
                            {% else %}
                                &pound;{{ phone.currentPhonePrice.yearlyPremiumPrice(app.user.additionalPremium)|number_format(2, '.', ',') }} a year
                            {% endif %}
                        </div>
                        <div class="purchase__footer d-none d-lg-block mt-5">
                            <div class="purchase__footer__text">
                                <h4 class="text-blue1">An amazing level of cover:</h4>
                                <ul class="list-unstyled icn-fa-list">
                                    <li class="text-white mb-2"><i class="fas fa-check text-blue1 fa-lg"></i> Cracked Screens, Theft, Loss and much more</li>
                                    <li class="text-white mb-2"><i class="fas fa-check text-blue1 fa-lg"></i> Instant Cover and 24/7 live support</li><li class="text-white"><i class="fas fa-check text-blue1 fa-lg"></i> 24-72 replacement phone once claim approved</li>
                                </ul>
                            </div>
                            <a href="#purchase_info"
                               class="btn btn-outline-blue1 mt-2"
                               data-toggle="collapse"
                               role="button"
                               aria-expanded="false"
                               aria-controls="purchase_info"><span>See full policy</span>
                               <i class="fas fa-caret-down"></i></a>
                        </div>
                    </div>
                    <div id="purchase_info" class="purchase__info__container collapse">
                        <div class="purchase__info mx-4 mx-lg-5 py-5">
                            <div class="h1 text-white">
                                {{ phone.make }} {{ phone.model }}
                                <small>({{ phone.memory }}GB)</small>
                            </div>
                            <div class="h1 text-blue1 mb-5">Full Cover Details</div>
                            <h4 class="text-blue1 mb-4">What's covered:</h4>
                            <ul class="list-unstyled icn-fa-list">
                                <li class="text-white mb-3"><i class="fas fa-check text-blue1 fa-lg"></i> Loss</li>
                                <li class="text-white mb-3"><i class="fas fa-check text-blue1 fa-lg"></i> Accidental Damage, including water damage &amp; cracked screens</li>
                                <li class="text-white mb-3"><i class="fas fa-check text-blue1 fa-lg"></i> 90 days global travel</li>
                                <li class="text-white mb-3"><i class="fas fa-check text-blue1 fa-lg"></i> Out of warranty breakdown</li>
                                <li class="text-white mb-3"><i class="fas fa-check text-blue1 fa-lg"></i> Unauthorised network charges up the value of &pound;1000 (inc VAT)</li>
                                <li class="text-white mb-3"><i class="fas fa-check text-blue1 fa-lg"></i> Accessories up to the value of £100 (inc VAT) for theft of loss claims</li>
                                <li class="text-white mb-5"><i class="fas fa-check text-blue1 fa-lg"></i> Cover for phones up to 3 years old, including second hand and refurbished devices</li>
                            </ul>
                            <h4 class="text-blue1 my-4">What's not covered:</h4>
                            <ul class="list-unstyled icn-fa-list">
                                <li class="text-white mb-3"><i class="fas fa-times text-blue1 fa-lg"></i> Theft, Loss, Accidental Damage or Breakdown where you have knowingly put your phone at risk</li>
                                <li class="text-white mb-3"><i class="fas fa-times text-blue1 fa-lg"></i> 3+ claims for Loss and/or Theft in any policy year</li>
                            </ul>
                        </div>
                        <div class="purchase__info mx-4 mx-lg-5 py-5">
                            <h4 class="text-blue1 mb-4">Here’s how we compare to competitors:</h4>
                            {# TODO: Competitors table #}
                        </div>
                        <div class="purchase__info mx-4 mx-lg-5 py-5">
                            <h4 class="text-blue1 mb-4">Here’s how we compare to other insurers:</h4>
                            <div class="d-xl-flex justify-content-lg-center">
                                <table class="table-list mx-auto mb-5 table-list__insurers">
                                    <thead>
                                        <tr>
                                            <th class="table-list__header h4 text-white">Traditional Insurers</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="py-3 px-4">
                                                <span class="table-list__icn table-list__icn-dark text-white">4-18 days wait on average</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="py-3 px-4">
                                                <span class="table-list__icn table-list__icn-dark text-white">Cover starts after 14 days</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="py-3 px-4">
                                                <span class="table-list__icn table-list__icn-dark text-white">Only phones purchased within  30 days are covered</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="py-3 px-4">
                                                <span class="table-list__icn table-list__icn-dark text-white">You'll need to have a law degree  to understand the terms</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="py-3 px-4 border-fix">
                                                <span class="table-list__icn table-list__icn-dark text-white">Unnecessarily expensive</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <table class="table-list mx-auto mb-5 table-list__so-sure">
                                    <thead>
                                        <tr>
                                            <th class="table-list__header h4 text-white blue-gradient-ld"><img src="{{ cdn_url }}/images/rebrand/logo/so-sure_logo-white-light.svg" width="130px"></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="py-3 px-4">
                                                <span class="table-list__icn table-list__icn-happy"><strong>24-72 hour replacement once claim approved</strong></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="py-3 px-4">
                                                <span class="table-list__icn table-list__icn-happy"><strong>Immediate cover</strong></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="py-3 px-4">
                                                <span class="table-list__icn table-list__icn-happy"><strong>Refurbished and second-hand devices up to 3 years old covered</strong></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="py-3 px-4">
                                                <span class="table-list__icn table-list__icn-happy"><strong>Plain English Terms &amp; Conditions</strong></span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="py-3 px-4">
                                                <span class="table-list__icn table-list__icn-happy"><strong>We’re up to 40% cheaper</strong></span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <p class="text-blue1"><small>*FCA report Dec 2015</small></p>
                        </div>
                        <div class="purchase__info mx-4 mx-lg-5 py-5 text-center text-lg-left">
                            <div class="row">
                                <div class="col-md-3 mb-3">
                                    <img src="http://via.placeholder.com/150x150" class="rounded-circle">
                                </div>
                                <div class="col-md-8">
                                    <h4 class="mt-0 mb-4 text-blue1">Excess</h4>
                                    <p class="mb-5 text-white">Our excess is as low as &pound;50 for accidental damage and &pound;70 for loss and theft when you validate your phone with our app. If you don't validate your phone with our app the standard excess is &pound;150</p>
                                    <a href="#" class="btn btn-outline-blue1">Find out more</a>
                                </div>
                            </div>
                        </div>
                        <div class="purchase__info mx-4 mx-lg-5 py-5 text-center text-lg-left">
                            <div class="row">
                                <div class="col-md-3 mb-3">
                                    <img src="http://via.placeholder.com/150x150" class="rounded-circle">
                                </div>
                                <div class="col-md-8 text-white">
                                    <h4 class="mt-0 mb-4 text-blue1">Cashback and Social Insurance</h4>
                                    <p>Get up to 80% cashback every year when you and your friends don’t claim.</p>
                                        <h5 class="text-blue1">How?</h5>
                                    <p class="mb-5">Connect to friends/family and each receive up to £10 in your individual Reward Pots. At the end of the year, when you and your connections haven’t claimed, your Reward Pot is paid out to you</p>
                                    <a href="#" class="btn btn-outline-blue1 mr-lg-2"><i class="far fa-play-circle fa-lg"></i> Watch video</a>
                                    <a href="#" class="btn btn-outline-blue1">Find out more</a>
                                </div>
                            </div>
                        </div>
                        <div class="purchase__info mx-4 mx-lg-5 py-5">
                            <h4 class="text-blue1 mb-4">Top FAQ's</h4>
                            <div class="expanding-cardbox expanding-cardbox-alt mb-4">
                                <div class="expanding-cardbox__body">
                                    <h5 class="expanding-cardbox__title text-white mb-0">
                                        Here's how it works <i class="fas fa-chevron-down text-white fa-lg"></i>
                                    </h5>
                                    <div class="expanding-cardbox__expand text-white mt-4">
                                        We reward our careful customers. If you and your connections don’t make a claim, we return up to 80% of your premium each year.
                                    </div>
                                </div>
                            </div>
                            <div class="expanding-cardbox expanding-cardbox-alt mb-4">
                                <div class="expanding-cardbox__body">
                                    <h5 class="expanding-cardbox__title text-white mb-0">
                                        Here's how it works <i class="fas fa-chevron-down text-white fa-lg"></i>
                                    </h5>
                                    <div class="expanding-cardbox__expand text-white mt-4">
                                        We reward our careful customers. If you and your connections don’t make a claim, we return up to 80% of your premium each year.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="purchase__info mx-4 mx-lg-5 py-5  text-center text-lg-left">
                            <div class="row">
                                <div class="col-md-3">
                                    <img src="http://via.placeholder.com/150x150" class="rounded-circle mb-3">
                                </div>
                                <div class="col-md-8 text-white">
                                    <h4 class="mt-0 mb-4 text-blue1">About the {{ phone.make }} {{ phone.model }}</h4>
                                    <ul class="list-inline">
                                        <li class="list-inline-item"><strong class="h5">Camera</strong>: {{ phone.camera }} MP</li>
                                        <li class="list-inline-item text-blue1">|</li>
                                        <li class="list-inline-item"><strong class="h5">Size</strong>: {{ phone.getScreenPhysicalInch }}</li>
                                        <li class="list-inline-item text-blue1">|</li>
                                        <li class="list-inline-item"><strong class="h5">Screen Resolution</strong>: {{ phone.getScreenResolution }}</li>
                                        <li class="list-inline-item text-blue1">|</li>
                                        <li class="list-inline-item"><strong class="h5">RAM</strong>: {{ phone.getRamDisplay }}</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                {# TODO: Curve #}

                <div class="purchase__form__container p-4 py-lg-5">
                    {% include 'AppBundle::Purchase/_purchaseStepsRebrand.html.twig' %}
                    {% include 'AppBundle::Purchase/_currentStepPersonalPhoneReview.html.twig' %}
                </div>
            {% else %}
                {# No phone #}
            {% endif %}
        </div>
    </section>

{% endblock %}

{% block javascriptsPage %}
    <script src="{{ asset('css-js/purchase.js') }}"></script>
{% endblock %}
