{% extends 'base.html.twig' %}

{# Set vars #}
{% set new_stylesheet = 1 %}
{% set distraction_free = 1 %}

{% block stylesheets %}
    {{ parent() }}
    {% stylesheets output='css/*.css'
        'components/owl.carousel/owl.carousel.min.css'
        'components/owl.carousel/owl.theme.default.min.css'
        '@AppBundle/Resources/public/sass/page/checkoutNew.scss'
    %}
        <link rel="stylesheet" href="{{ asset_url }}">
    {% endstylesheets %}
{% endblock %}

{% block body %}

<section class="checkout">
    <div class="checkout--top">
        <div class="container">
            {% if policy.hasNextPolicy and policy.nextPolicy.status == "renewal" %}
                <h1 class="h2">
                    <span class="title-top">
                        Your policy is scheduled to be renewed
                        {% if policy.hasCashback %}
                            <br>
                            Your cashback request was received and will be processed <span class="text-blue">28-45</span> days after your policy has ended.
                        {% endif %}
                    </span>
                </h1>
            {% elseif policy.hasCashback %}
                <h1 class="h2"><span class="title-top">Your cashback request was received and will be processed <span class="text-blue">28-45</span> days after your policy has ended.</span></h1>
            {% else %}
                <h1>
                    <span class="title-top">Renew your</span>
                    <br class="visible-xs">
                    <span class="title-phone text-blue text-nowrap">{{ policy.phone.make }} {{ policy.phone.model }} {% if policy.phone.memory %}{{ policy.phone.memory }}GB{% endif %} </span>
                    <br class="visible-xs">
                    <span class="title-top">insurance</span><br>
                    {% if policy.getPremiumPlan == 'monthly' %}
                        <span class="title-price">for just <span class="text-blue">£{{ renew.getAdjustedStandardMonthlyPremiumPrice }}</span> per month</span>
                    {% else %}
                        <span class="title-price">for just <span class="text-blue">£{{ renew.getAdjustedYearlyPremiumPrice }}</span> per year</span>
                    {% endif %} <br>
                </h1>

                {% if policy.potValue > 0 %}
                    <div class="text-center">
                        <span class="h4 text-light-blue">
                            {% if policy.getPremiumPlan == 'monthly' %}
                                (<span class="text-blue">£{{ renew.getMonthlyPremiumPrice }}</span> per month without your <span class="text-blue">£{{ policy.potValue }}</span> reward pot)
                            {% else %}
                                (<span class="text-blue">£{{ renew.getYearlyPremiumPrice }}</span> per year without your <span class="text-blue">£{{ policy.potValue }}</span> reward pot)
                            {% endif %}
                        </span>
                    </div>
                {% endif %}
                <h4 class="text-center">and keep covered against:</h4>

                <div class="owl-carousel owl-theme visible-xs benefits">
                    <div class="item">
                        <img src="{{ cdn_url }}/images/library_benefits/so-sure_cover-water-damage.svg" alt="Accidental Damage" title="Accidental damage">
                        <h5>Water damage</h5>
                    </div>
                    <div class="item">
                        <img src="{{ cdn_url }}/images/library_benefits/so-sure_cover-cracked-screen.svg" alt="Cracked screen" title="Cracked screen">
                        <h5>Cracked screen</h5>
                    </div>
                    <div class="item">
                        <img src="{{ cdn_url }}/images/library_benefits/so-sure_cover-loss.svg" alt="Loss" title="Loss">
                        <h5>Loss</h5>
                    </div>
                    <div class="item">
                        <img src="{{ cdn_url }}/images/library_benefits/so-sure_cover-theft.svg" alt="Theft" title="Theft">
                        <h5>Theft</h5>
                    </div>
                </div>

                <ul class="list-inline cover-list hidden-xs benefits">
                    <li>
                        <img src="{{ cdn_url }}/images/library_benefits/so-sure_cover-water-damage.svg" alt="Accidental Damage" title="Accidental damage">
                        <h5 class="h-light">Water damage</h5>
                    </li>
                    <li>
                        <img src="{{ cdn_url }}/images/library_benefits/so-sure_cover-cracked-screen.svg" alt="Cracked screen" title="Cracked screen">
                        <h5 class="h-light">Cracked screen</h5>
                    </li>
                    <li>
                        <img src="{{ cdn_url }}/images/library_benefits/so-sure_cover-loss.svg" alt="Loss" title="Loss">
                        <h5 class="h-light">Loss</h5>
                    </li>
                    <li>
                        <img src="{{ cdn_url }}/images/library_benefits/so-sure_cover-theft.svg" alt="Theft" title="Theft">
                        <h5 class="h-light">Theft</h5>
                    </li>
                </ul>
            {% endif %}
        </div>
    </div>
    {% block actions %}{% endblock %}
</section>

{# Page Modals #}
<div class="modal modal-fullscreen fade"
     id="policy-modal"
     tabindex="-1"
     role="dialog"
     aria-labelledby="So-Sure Policy Terms"
     aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <i class="fa fa-times fa-lg" aria-hidden="true"></i>
                    <span class="sr-only">Close</span>
                </button>
                <h3>So-Sure Policy Terms</h3>
            </div>
            <div class="modal-body modal-policy">
                {{ render(controller('AppBundle:ApiView:policyLatestTerms', {'policy_key': policy_key, 'maxPotValue':  phone.getCurrentPhonePrice.maxPot })) }}
            </div>
        </div>
    </div>
</div>
{% block modals %}{% endblock %}
{# End Page Modals #}

{% endblock %}


{% block javascripts %}
    {{ parent() }}
    {% javascripts
    'components/owl.carousel/owl.carousel.min.js'
    '@AppBundle/Resources/public/js/Default/index.js'
    '@AppBundle/Resources/public/js/User/renew.js'
     %}
    <script src="{{ asset_url }}"></script>{% endjavascripts %}
{% endblock %}
